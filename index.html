<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Zane Taylor \\ Creative Web Engineer \\ Portland</title>
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <style>
      * {
        box-sizing: border-box;
      }
      html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      html {
        /* background: url('what-the-hex.png'); */
      }
      body {
        margin: 0;
        padding: 0;
        color: #333;
        line-height: 1.8;
        font-family: "Fira Mono", Roboto, Open Sans, Helvetica, Arial, sans;
        font-size: 18px;
        font-weight: 400;
        /* background: rgba(245, 245, 245, .85); */
      }
      body.dark {
        color: #eee;
      }
      #map {
        position: absolute;
        width: 100vw;
        height: 100vh;
        /* opacity: .9; */
      }
      .mapboxgl-control-container {
        display: none !important;
      }
      .overlay {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: .35;
        /* background: url('what-the-hex.png'); */
      }
      .dark .overlay {
        opacity: .25;
      }
      .view {
        position: relative;
        background: rgba(245, 245, 245, .6);
        height: 100vh;
        overflow: auto;
      }
      .dark .view {
        background: rgba(33, 33, 33, .6);
      }
      .greet {
        position: absolute;
        top: 4px;
        right: 4px;
        color: #eee;
        max-width: 475px;
        /* padding: .25rem .5rem; */
        /* background: rgba(0,0,0,.5); */
        /* border-radius: 1px; */
        /* opacity: 0; */
      }
      .greeting {
        float: right;
        margin: 0;
        padding: .2rem .5rem;
        font-size: 0.75rem;
        text-align: right;
        background: rgba(0,0,0,.5);
        opacity: 0;
      }
      /* .greeting:first-child {
        padding-bottom: .2rem;
      } */
      .greeting:last-child {
        padding-top: 0;
      }
      .greeting .loc {
        font-weight: 500;
        background: #7C4EFF;
        color: #fff;
      }
      .wrap {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100%;
        margin: 0 auto;
        /*min-width: 40rem;*/
        max-width: 64rem;
        padding: 4rem;
        text-shadow: #efefef 1px 1px 0;
      }
      .dark .wrap {
        text-shadow: #111 1px 1px 0;
      }
      .content {

      }
      h1 {
        margin: 0 0 3rem 0;
        line-height: 1.4;
        font-size: 3rem;
        font-weight: 700;
        font-family: "Work Sans", Roboto, Open Sans, Helvetica, Arial, sans;
      }
      h1 span {
        color: #7C4EFF;
      }
      h3 {
        margin: 0;
      }
      p {
        margin: 0 0 3rem 0;
        font-size: 1.75rem;
      }
      p a,
      li a {
        position: relative;
        color: #242424;
        text-decoration: none;
        background-size: 100% 300%;
        background-image: linear-gradient(transparent 28px, #7C4EFF 0);
        transition: all .25s;
        text-shadow: none;
      }
      .dark p a,
      .dark li a {
        color: #eee;
      }
      li a {
        background-image: linear-gradient(transparent 19px, #7C4EFF 0);
      }
   /*   a:before {
        content: "";
        position: absolute;
        z-index: 0;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;

        transition: all .33s;
      }*/
      li a:hover,
      p a:hover {
        color: #fff;
        text-shadow: #aaa 1px 1px 1px;
        background-position: -140px;
      }
      ul {
        float: left;
        list-style: none;
        padding: 0;
        margin-right: 3rem;
      }
      ul a {
        color: #242424;
        text-decoration: none;
        /* border-bottom: 3px solid #7C4EFF; */
      }
      /* ul a:hover {
        color: #efefef;
        background: #7C4EFF;
      } */
  /*    a:hover:before {
        height: 100%;
      }*/
    </style>
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:600,700|Fira+Mono:400,500" rel="stylesheet">
    <!-- <link href='https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.css' rel='stylesheet' /> -->
  </head>
  <body>
    <div id="map"></div>
    <div class="overlay"></div>
    <div class="view">
      <div class="greet">
        <p class="greeting">It looks you're visiting from <span class="loc"></span>.</p>
        <p class="greeting"><span class="hi">How's the weather?</span></p>
      </div>
      <div class="wrap">
        <div class="content">
          <h1><span>Zane Taylor</span> is a creative web &amp; mobile engineer.</h1>
          <p>He lives in Portland, building stuff with code, data, maps, and open source. He's usually drinking coffee, riding a bike, hitting the trail, or petting a cat.</p>
          <h2>Need more?</h2>
          <p>Go ahead and <a target="_blank" href="mailto:hey@zanetaylor.me">say hello</a>, <a target="_blank" href="https://calendly.com/zanetaylor">schedule a chat</a>, or <a target="_blank" href="https://keybase.io/encrypt#zanetaylor">send him a secret message</a>.</p>

          <h3>See also</h3>
          <ul>
            <li><a href="/resume">Resume &rarr;</a></li>
            <li><a href="https://www.linkedin.com/in/iamzanetaylor">LinkedIn &rarr;</a></li>
            <li><a href="https://github.com/zanetaylor">Github &rarr;</a></li>
          </ul>
          <ul>
            <li><a href="https://stackoverflow.com/story/zanetaylor">Stack Overflow &rarr;</a></li>
            <li><a href="https://letterboxd.com/zanetaylor">Letterboxd &rarr;</a></li>
            <li><a href="https://last.fm/zotterdas">Last.fm &rarr;</a></li>
          </ul>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@1.24.1/build/global/luxon.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.11.0/mapbox-gl.js"></script>
	    <!-- <script src='https://api.mapbox.com/mapbox.js/plugins/turf/v3.0.11/turf.min.js'></script> -->

    <script>
      var DateTime = luxon.DateTime
      var dark = false

      mapboxgl.accessToken = 'pk.eyJ1Ijoiem90dGVyZGFzIiwiYSI6ImNrNzd2ZTZ6cTAyMTAzbG51eG41dDV5c2QifQ.Gt6NSuWV9kymSGDvs4VlMQ';
      var map = new mapboxgl.Map({
        container: 'map', // container id
        style: 'mapbox://styles/zotterdas/ckbv7kvf6172m1ivo731ifecs', // stylesheet location
        // center: [-74.5, 40], // starting position [lng, lat]
        zoom: 15.5,
        pitch: 60
      })

      function rotateCamera(timestamp) {
        // clamp the rotation between 0 -360 degrees
        // Divide timestamp by 100 to slow rotation to ~10 degrees / sec
        map.rotateTo((timestamp / 500) % 360, { duration: 0 });
        // Request the next frame of the animation.
        requestAnimationFrame(rotateCamera);
      }

      map.addControl(new mapboxgl.NavigationControl())

      map.on('load', ()=> {
        fetch('https://freegeoip.app/json/')
          .then(response => response.json())
          // .then(data => { ip_lookup = data })
          .then(data => {

            var time = DateTime.fromObject({zone: data.time_zone})
            console.log(time)

            if(time.hour > 20 || time.hour < 6) {
              dark = true
            }

            if(dark) {
              $('body').toggleClass('dark')
              map.setStyle('mapbox://styles/zotterdas/ckbxvs6p12h081inbbgko2edn')
            }

            if(data.city) {
              $('.loc').text(data.city)
            } else if(data.region_name) {
              $('.loc').text(data.region_name)
            } else {
              if(data.country_code == 'US') {
                $('.loc').text('somewhere in the ' + data.country_name)
              } else {
                $('.loc').text('somewhere in ' + data.country_name)
              }
            }

            $('.greeting').animate({'opacity': 1}, 300)

            map.jumpTo({
              center: [data.longitude, data.latitude],
              // zoom: 12,
              // minZoom: 8,
              // speed: 4
            })

          })
      })

      map.once('moveend', ()=> {
        rotateCamera(0)
      })
    </script>
  </body>
</html>
